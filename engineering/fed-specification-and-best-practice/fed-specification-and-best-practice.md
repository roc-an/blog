# 前端编码规范及最佳实践整理

## 编码原则与约定

### 职责分离原则

数学家会数学，物理学家也会数学。但是遇到一个数学大难题，是给数学家还是物理学家解决？

在编码前端项目时，要注意**结构（HTML）、表现（CSS）和行为（JavaScript）之间的分离**。

另外遇到大型复杂场景，记得及时解耦，将一个大型模块拆分成若干小模块，并且在拆分过程中注意编码复用。

### 避免过长代码行

如果一行代码过长，在编辑器里就需要左右横向滚动来查看和编写，这样很不方便。

* 一般一行代码最多不超过 80 或 120 字符，看团队要求和个人习惯
* 建议在编辑器设置自动换行功能，超过一行最大字符数就换行显示
* 也可以在编辑器设置指示线，最大字符数那一列会显示一条指示线来警示

### 待办事项 TODO 约定

注释中用 `TODO` 标识待完成的任务，这样后面可以配合编辑器的搜索快速检索。

HTML 中：

```html
<!-- 公司简介 -->
<div class="intro">
  ...
</div>

<!-- TODO: 关于我们 -->

<!-- 联系我们 -->
<div class="contact">
  ...
</div>
```

CSS 中：

```css
/* TODO: 测试在非 Chrome 下的浏览器兼容性 */
...
```

JS 中：

```js
/**
 * @description: 个人中心
 * @TODO: 接口联调
 */

// TODO: Mock 数据替换为真实接口
fetchMine().then(() => {
  ...
});
```

## HTML

### 文档类型

统一使用 HTML5 的标准文档类型：`<!DOCTYPE html>`。

HTML5 文档类型前后兼容，容易记也容易写，一般编辑器都支持快速生成 H5 文档，比如 VSCode 下保存文件为 `.html` 后缀然后输入 `!` 就可以快速生成。

### 用双引号包裹属性值

标签的属性值统一使用双引号 `""` 包裹。

不推荐：

```html
<div class='intro'>...</div>
```

推荐：

```html
<div class="intro">...</div>
```

### 标签语义化

* 根据 HTML 元素的用途去区分使用它们
* 满足场景时优先使用 HTML5 提供的语义标签：`<header>`、`<footer>`、`<article>`、`<section>`、`<nav>`、`<aside>`、`<address>`

不推荐：

```html
<p>新闻标题 XXX</p>
```

推荐：

```html
<h1>新闻标题 XXX</h1>
```

虽然使用 `<p>` 配合着 CSS 可以实现标题样式，但 `<p>` 的语义是段落，标题场景应使用 `h1~h6`。

### 将 `<script>` 标签放在 `<body>` 标签内的结尾处

不推荐：

```html
<head>
  <title>Example HTML Page</title>
  <script src="example1.js"></script>
  <script src="example2.js"></script>
</head>
<body>
  ...
</body>
```

很早之前，所有的 `<script>` 标签都放在 `<head>` 标签里。这就意味着必须把所有的 JavaScript 代码都下载、解析和解释完成后，才能开始渲染页面（页面在浏览器解析到 `<body>` 的起始标签时开始渲染）。

对于需要很多 JavaScript 的页面，这会导致页面渲染的明显延迟，在此期间浏览器窗口完全空白。

为解决这个问题，现在通常将 `<script>` 标签放在 `<body>` 标签中页面内容的后面。

推荐：

```html
<head>
  <title>Example HTML Page</title>
</head>
<body>
  ...
  ...
  <script src="example1.js"></script>
  <script src="example2.js"></script>
</body>
```

这样页面会在处理 JS 代码前渲染出来，由于浏览器显示空白页面的时间短了，用户会觉得页面加载更快了。

### 使用实体字符

一些字符在 HTML 中拥有特殊的含义，比如小于号 (`<`) 用于定义标签的开始。如果要正确显示，应优先使用实体字符。

这里列出常用的实体字符：

符号 | 用途 | 实体字符 |
-- | -- | --
` ` | 空格 | `&nbsp;`、`&ensp;`、`&emsp;`
`©` | 版权 | `&copy;`
`¥` | 人民币 | `&yen;`
`®` | 注册商标 | `&reg;`
`>` | 大于号 | `&gt;`
`<` | 小于号 | `&lt;`
`&` | 和号 | `&amp;`
