# 一段话说透一个前端知识点 - Web 安全

## 常见的 Web 前端攻击方式有哪些？

* XSS 跨站请求攻击：
  * 一个博客网站，我发表一篇博客，其中嵌入 `<script>` 脚本
  * 脚本内容：获取 Cookie（获取其中的敏感信息，比如用户 ID、个人信息等），发送到我的服务器（服务器配合跨域）
  * 发布这篇博客，有人查看它，我轻松收割访问者的 Cookie
* XSRF 跨站请求伪造：
  * 你正在购物，看中了某个商品，商品 ID 是 100
  * 付费接口是 `xxx.com/pay?id=100`，但没有任何验证（比如，登录就能购买，购买就会扣款）
  * 我是攻击者，我看中了一个商品，ID 是 200
  * 我向你发送一封电子邮件，邮件标题很吸引人
  * 但邮件正文隐藏着 `<img src="xxx.com/pay?id=200" />`
  * 你一查看邮件，就帮我购买了 ID 是 200 的商品

因为你只要之前购物，就会登录网站，就会有用户信息。通过加载图片，去访问 URL（图片加载的请求是可跨域的），此时你的浏览器携带购物网站的个人信息（如 Cookie）

XSS 预防：

* 替换特殊字符，如 `<` 变为 `&lt;`，`>` 变为 `&gt;`
* 这样的话，`<script>` 就会变为 `&lt;script&gt;`，直接显示，而不会作为脚本执行
* 前端要替换（前端渲染时替换），后端也要替换（后端存储时替换），都做总不会出错

XSRF 预防：

* 使用 POST 接口，这样 img 攻击不通
* 增加验证，如支付密码、短信验证码、指纹等

### 中间人攻击

HTTP 是明文传输的，在浏览器和服务器间传输过程中的每个环节，数据都有可能被中间人**窃取/伪造/篡改**，这种攻击方式就是**中间人攻击**

HTTP 数据交给 TCP 层之后，数据会经过用户电脑、Wifi 路由器、运营商和目标服务器，这中间环节就可能受到中间人攻击

比如电脑被黑客装了恶意软件，恶意软件就能抓取和篡改 HTTP 请求的内容

或者不小心连上了 Wifi 钓鱼路由器，那么数据也会被黑客抓取和篡改
