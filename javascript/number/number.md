# 深入理解 JavaScript 中的数字类型

JS 中所有数字都是用 64 位双精度浮点数表示的。

## 浮点型直接量

除了一般的表示小数的写法（实数，比如 1.01，由整数部分、小数点、小数部分组成），JS 中还可以用“指数记数法”来表示浮点型直接量。

指数记数法，就是用实数乘以 10 的指数次幂：`[digits][.digits][(E|e)[(+|-)]digits]`

eg：

```js
3.11e23 // 3.11+23，也就是 3.11 * 10 的 23 次幂
7.85E-3 // 0.00785，也就是 7.85 * 10 的 -3 次幂
```

## JS 表示进制数

**二进制**：

计算机技术中广泛采用的进制，是仅用 0 和 1 表示的数，基数是 2，进位规则“逢二进一”

多提一嘴，为什么计算机普遍使用二进制数（二进制的优势）？

* 技术上容易实现：因为二进制只需要 0 和 1 这两个数码来表示，所以任何具有两个不同稳定状态的原件（双稳态电路）都可以用来表示一个数的某一位。
* 可靠：只使用 0 和 1，传输和存储时不易出错；
* 运算规则简单：相比十进制数，二进制的运算规则简单得多，四则运算都可归结为加法和移位，由此，运算线路可以得到简化，从而提高运算速度

一个数字对象，可以通过 `toString()`（[`Number.prototype.toString()`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Number/toString)）方法转成二进制表示的字符串，eg：

```
(6).toString(2); // "110"
(7).toString(2); // "111"
```

其中，`toString([radix])` 方法传入的参数是用于转换的基数（2 到 36）。

ES6 支持以 `0b`（或 `0B`）开头来直接表示二进制数，eg：

```js
0b110 // 6
0b111 // 7
```

**八进制**:

八进制数以 8 为基数，ES6 要求以 `0o`（或 `0O`）开始，后跟随由 0~7 表示的数字序列，eg：

```js


0o377 // 255，相当于十进制中的 255
0o377.toString(2); // "11111111"
Number(0o377); // 255，Number() 可以将其他进制字符串转为十进制数
```

PS：ES5 时代八进制数是以 0 开始的（eg. `0377`），但严格模式下，八进制直接量是禁止使用以 0 开头的。所以如果要用八进制，还是乖乖用 ES6 `0o` 开头的写法为佳。

**十进制**：

平时业务编码最常用的，基数是 10（意味着每列可以使用 0-9）。

用 JS 表示十进制数，eg. `1000`

**十六进制**：

十六进制数以 16 为基数，JS 中十六进制数以 `0x` 或 `0X` 为前缀，数值由 0~9 和 a~f 构成，eg：

`0xff // 255，相当于十进制的 255，15 * 16 + 15 = 255`

同样，也可以通过 `toString()` 方法将十六进制数转成其他进制数的字符串表示：

```js
0xff.toString(2); // "11111111"
0xff.toString(8); // "377"
0xff.toString(10); // "255"
```

设置 CSS 颜色时就会用到十六进制数。

## 算术运算

通过 `Math` 对象提供的各种静态方法（函数的方法）可以进行较复杂的算术运算：

```js
Math.pow(2, 8); // 256，2 的 8 次幂
Math.round(0.5); // 1，四舍五入到最接近的整数，注意 0.5 会四舍五入到 1
Math.ceil(0.3); // 1，向上求整，即返回大于等于给定数的最小整数
Math.floor(0.9); // 0.9，向下求整，即返回小于等于给定数的最大整数
Math.abs(-10); // 10，求绝对值
Math.max(-10, 3, 108); // 108，求几个数中最大值
Math.min(-10, 3, 108); // -10，求几个数中最小值
Math.random(); // 0.005132670423310115，得到大于等于 0 小于 1 的伪随机数
Math.PI; // 3.141592653589793，圆周率
Math.E; // 2.718281828459045，自然对数的底数
Math.sqrt(4); // 2，求平方根
Math.pow(8, 1/3); // 2，求立方根
Math.sin(0); // 0，三角函数，还有 Math.cos()、Math.atan() 等
Math.log(10); // 2.302585092994046，10 的自然对数
Math.log(100)/Math.LN10; // 2，以 10 为底 100 的对数
Math.exp(3); // 20.085536923187668，e 的 3 次幂
```

上面有提到 `Math.random()` 得到的是“伪随机数”，什么是伪随机数？

伪随机数是用确定性的算法计算出来自 `[0,1]` 均匀分布的随机数序列。并不真正的随机。

所以，`Math.random()` 不能提供像密码一样安全的随机数字，如果要生成符合密码学要求的安全随机值，可以使用 Web Crypto API：[`window.crypto.getRandomValues()`](https://developer.mozilla.org/zh-CN/docs/Web/API/Crypto/getRandomValues)
